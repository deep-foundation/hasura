(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{"2qu3":function(t,e,n){"use strict";var o=n("oI91"),r=n("/GRZ"),i=n("i2R6");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}e.__esModule=!0,e.default=void 0;var c,d=(c=n("q1tI"))&&c.__esModule?c:{default:c},p=n("8L3h"),h=n("jwwS");var f=[],y=[],m=!1;function b(t){var e=t(),n={loading:!0,loaded:null,error:null};return n.promise=e.then((function(t){return n.loading=!1,n.loaded=t,t})).catch((function(t){throw n.loading=!1,n.error=t,t})),n}function v(t){var e={loading:!1,loaded:{},error:null},n=[];try{Object.keys(t).forEach((function(o){var r=b(t[o]);r.loading?e.loading=!0:(e.loaded[o]=r.loaded,e.error=r.error),n.push(r.promise),r.promise.then((function(t){e.loaded[o]=t})).catch((function(t){e.error=t}))}))}catch(o){e.error=o}return e.promise=Promise.all(n).then((function(t){return e.loading=!1,t})).catch((function(t){throw e.loading=!1,t})),e}function g(t,e){return d.default.createElement(function(t){return t&&t.__esModule?t.default:t}(t),e)}function _(t,e){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:g,webpack:null,modules:null},e),o=null;function r(){if(!o){var e=new w(t,n);o={getCurrentValue:e.getCurrentValue.bind(e),subscribe:e.subscribe.bind(e),retry:e.retry.bind(e),promise:e.promise.bind(e)}}return o.promise()}if(!m&&"function"===typeof n.webpack){var i=n.webpack();y.push((function(t){var e,n=u(i);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(-1!==t.indexOf(o))return r()}}catch(a){n.e(a)}finally{n.f()}}))}var a=function(t,e){r();var i=d.default.useContext(h.LoadableContext),a=(0,p.useSubscription)(o);return d.default.useImperativeHandle(e,(function(){return{retry:o.retry}}),[]),i&&Array.isArray(n.modules)&&n.modules.forEach((function(t){i(t)})),d.default.useMemo((function(){return a.loading||a.error?d.default.createElement(n.loading,{isLoading:a.loading,pastDelay:a.pastDelay,timedOut:a.timedOut,error:a.error,retry:o.retry}):a.loaded?n.render(a.loaded,t):null}),[t,a])};return a.preload=function(){return r()},a.displayName="LoadableComponent",d.default.forwardRef(a)}var w=function(){function t(e,n){r(this,t),this._loadFn=e,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return i(t,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var t=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var e=this._res,n=this._opts;e.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){t._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){t._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){t._update({}),t._clearTimeouts()})).catch((function(e){t._update({}),t._clearTimeouts()})),this._update({})}},{key:"_update",value:function(t){this._state=s(s({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},t),this._callbacks.forEach((function(t){return t()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(t){var e=this;return this._callbacks.add(t),function(){e._callbacks.delete(t)}}}]),t}();function O(t){return _(b,t)}function E(t,e){for(var n=[];t.length;){var o=t.pop();n.push(o(e))}return Promise.all(n).then((function(){if(t.length)return E(t,e)}))}O.Map=function(t){if("function"!==typeof t.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return _(v,t)},O.preloadAll=function(){return new Promise((function(t,e){E(f).then(t,e)}))},O.preloadReady=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(e){var n=function(){return m=!0,e()};E(y,t).then(n,n)}))},window.__NEXT_PRELOADREADY=O.preloadReady;var x=O;e.default=x},"9d8Q":function(t,e,n){},Vvt1:function(t,e,n){t.exports=n("a6RD")},a6RD:function(t,e,n){"use strict";var o=n("oI91");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.__esModule=!0,e.noSSR=u,e.default=function(t,e){var n=a.default,o={loading:function(t){t.error,t.isLoading;return t.pastDelay,null}};t instanceof Promise?o.loader=function(){return t}:"function"===typeof t?o.loader=t:"object"===typeof t&&(o=i(i({},o),t));if(o=i(i({},o),e),"object"===typeof t&&!(t instanceof Promise)&&(t.render&&(o.render=function(e,n){return t.render(n,e)}),t.modules)){n=a.default.Map;var r={},s=t.modules();Object.keys(s).forEach((function(t){var e=s[t];"function"!==typeof e.then?r[t]=e:r[t]=function(){return e.then((function(t){return t.default||t}))}})),o.loader=r}o.loadableGenerated&&delete(o=i(i({},o),o.loadableGenerated)).loadableGenerated;if("boolean"===typeof o.ssr){if(!o.ssr)return delete o.ssr,u(n,o);delete o.ssr}return n(o)};s(n("q1tI"));var a=s(n("2qu3"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return delete e.webpack,delete e.modules,t(e)}},gIQq:function(t,e,n){const{Object3D:o,Matrix4:r,Vector3:i,Quaternion:a,Euler:s,_Math:u}=n("sQOU"),l=function(t){var e,n,s,u="",c=[],d=[];o.call(this),this.matrixAutoUpdate=!1,this.standingMatrix=new r,this.head={position:new i,quaternion:new a},this.gamepad=t,this.name=t.id,this.dof=t.pose?3*(+t.pose.hasOrientation+ +t.pose.hasPosition):0;const p=[];p.name="",p.intensity=0,this.vibeChannels=[p],this.vibeChannels.intensity=0,this.vibeChannels.prior=0,u=t.hand,c.byName={},t.axes.forEach((function(t,e){c[e]=t})),d.byName={},t.buttons.forEach((function(t,e){d[e]={name:"button_"+e,value:t.value,isTouched:t.touched,isPressed:t.pressed,isPrimary:!1}})),e=Object.keys(l.supported).find((function(e){if(t.id.startsWith(e))return!0})),void 0!==(n=l.supported[e])&&(this.style=n.style,void 0!==n.axes&&n.axes.forEach((function(t){c.byName[t.name]=t.indexes})),void 0!==n.buttons&&n.buttons.forEach((function(t,e){d[e].name=t})),s=n.primary),d.forEach((function(t){d.byName[t.name]=t})),void 0===s&&(s=t.buttons.length>1?"button_1":"button_0"),d.byName[s].isPrimary=!0,this.getHandedness=function(){return u},this.getAxis=function(t){return c[t]},this.getAxes=function(t){var e=[];return void 0===t?c:"string"===typeof t?(c.byName[t].forEach((function(t){e.push(c[t])})),e):"number"===typeof t?c[t]:void 0},this.getButton=function(t){return"string"===typeof t?("primary"===t&&(t=s),d.byName[t]):"number"===typeof t?d[t]:void 0},this.inspect=function(){return"#"+t.index+": "+t.id+"\n\tStyle: "+this.style+"\n\tDOF: "+this.dof+"\n\tHandedness: "+u+"\n\n\tAxes: "+c.reduce((function(t,e,n){return t+e+(n<c.length-1?", ":"")}),"")+'\n\n\tButton primary: "'+s+'"\n\tButtons:'+d.reduce((function(t,e){return t+'\n\t\tName: "'+e.name+'"\n\t\t\tValue:     '+e.value+"\n\t\t\tisTouched: "+e.isTouched+"\n\t\t\tisPressed: "+e.isPressed+"\n\t\t\tisPrimary: "+e.isPrimary}),"")+"\n\n\tVibration intensity: "+this.vibeChannels.intensity+"\n\tVibration channels:"+this.vibeChannels.reduce((function(t,e){return t+'\n\t\tName: "'+e.name+'"\n\t\t\tCurrent intensity: '+e.intensity+e.reduce((function(t,e){return t+"\n\t\t\tat time "+e[0]+" intensity = "+e[1]}),"")}),"")},this.pollForChanges=function(){var e=l.verbosity,n=this,o="> #"+n.gamepad.index+" "+n.gamepad.id+" (Handedness: "+u+") ",r=Object.keys(c.byName),i=!1;u!==n.gamepad.hand&&(e>=.4&&console.log(o+'hand changed from "'+u+'" to "'+n.gamepad.hand+'"'),u=n.gamepad.hand,n.dispatchEvent({type:"hand changed",hand:u})),r.length>0?r.forEach((function(r){var a=[];i=!1,c.byName[r].forEach((function(e){t.axes[e]!==c[e]&&(i=!0,c[e]=t.axes[e]),a.push(c[e])})),i&&("vive"===n.style&&"thumbpad"===r&&(a[1]*=-1),e>=.7&&console.log(o+r+" axes changed",a),n.dispatchEvent({type:r+" axes changed",axes:a}))})):(t.axes.forEach((function(t,e){t!==c[e]&&(i=!0,c[e]=t)})),i&&(e>=.7&&console.log(o+"axes changed",c),n.dispatchEvent({type:"axes changed",axes:c}))),d.forEach((function(r,i){var a,s=o+r.name+" ",u=r.isPrimary;r.value!==t.buttons[i].value&&(r.value=t.buttons[i].value,e>=.6&&console.log(s+"value changed",r.value),n.dispatchEvent({type:r.name+" value changed",value:r.value}),u&&n.dispatchEvent({type:"primary value changed",value:r.value})),r.isTouched!==t.buttons[i].touched&&(r.isTouched=t.buttons[i].touched,a=r.isTouched?"began":"ended",e>=.5&&console.log(s+"touch "+a),n.dispatchEvent({type:r.name+" touch "+a}),u&&n.dispatchEvent({type:"primary touch "+a})),r.isPressed!==t.buttons[i].pressed&&(r.isPressed=t.buttons[i].pressed,a=r.isPressed?"began":"ended",e>=.5&&console.log(s+"press "+a),n.dispatchEvent({type:r.name+" press "+a}),u&&n.dispatchEvent({type:"primary press "+a}))}))}};function c(){this.isLeftHanded=!1,this.controllerQ=new a,this.lastControllerQ=new a,this.headQ=new a,this.headPos=new i,this.elbowPos=new i,this.wristPos=new i,this.time=null,this.lastTime=null,this.rootQ=new a,this.pose={orientation:new a,position:new i}}l.prototype=Object.create(o.prototype),l.prototype.constructor=l,l.prototype.update=function(){var t=this.gamepad,e=t.pose;null!==e.orientation&&this.quaternion.fromArray(e.orientation),null!==e.position?(this.position.fromArray(e.position),this.matrix.compose(this.position,this.quaternion,this.scale)):(void 0===this.armModel&&(l.verbosity>=.5&&console.log("> #"+t.index+" "+t.id+" (Handedness: "+this.getHandedness()+") adding OrientationArmModel"),this.armModel=new c),this.armModel.setHeadPosition(this.head.position),this.armModel.setHeadOrientation(this.head.quaternion),this.armModel.setControllerOrientation((new a).fromArray(e.orientation)),this.armModel.update(),this.matrix.compose(this.armModel.getPose().position,this.armModel.getPose().orientation,this.scale)),this.matrix.multiplyMatrices(this.standingMatrix,this.matrix),this.matrixWorldNeedsUpdate=!0,this.pollForChanges(),this.applyVibes(),"function"===typeof this.updateCallback&&this.updateCallback()},l.VIBE_TIME_MAX=5e3,l.prototype.setVibe=function(t,e){if("number"===typeof t&&void 0===e&&(e=t,t=""),"string"===typeof t){const n=this,o={};let r=n.vibeChannels.find((function(e){return e.name===t}));void 0===r?(r=[],r.name=t,r.intensity=0,n.vibeChannels.push(r)):r.splice(0),"number"===typeof e?r.intensity=e:e="number"===typeof r.intensity?r.intensity:0;let i=window.performance.now();return o.set=function(t){return r.push([i,t]),o},o.wait=function(t){return i+=t,o},o}},l.prototype.renderVibes=function(){const t=window.performance.now();this.vibeChannels.forEach((function(e){for(;e.length&&t>e[0][0];)e.intensity=e[0][1],e.shift();"number"!==typeof e.intensity&&(e.intensity=0)}));const e=Math.min(1,Math.max(0,this.vibeChannels.reduce((function(t,e){return t+ +e.intensity}),0)));return this.vibeChannels.intensity=e,e},l.prototype.applyVibes=function(){if(this.gamepad.hapticActuators&&this.gamepad.hapticActuators[0]){const t=this.renderVibes(),e=window.performance.now();(t!==this.vibeChannels.prior||e-this.vibeChannels.lastCommanded>l.VIBE_TIME_MAX/2)&&(this.vibeChannels.lastCommanded=e,this.gamepad.hapticActuators[0].pulse(t,l.VIBE_TIME_MAX),this.vibeChannels.prior=t)}},l.verbosity=0,l.controllers=[],l.onGamepadConnect=function(t){var e=l,n=new e(t);n.gamepad.hapticActuators;e.controllers[t.index]=n,e.verbosity>=.5&&console.log("vr controller connected",n),e.verbosity>=.7&&console.log(n.inspect()),window.setTimeout((function(){window.dispatchEvent(new CustomEvent("vr controller connected",{detail:n}))}),500)},l.onGamepadDisconnect=function(t){var e=l,n=e.controllers[t.index];e.verbosity>=.5&&console.log("vr controller disconnected",n),n.dispatchEvent({type:"disconnected",controller:n}),e.controllers[t.index]=void 0},l.update=function(){var t,e,n;if(void 0!==navigator.getGamepads)for(t=navigator.getGamepads(),n=0;n<t.length;n++)void 0!==(e=t[n])&&null!==e&&void 0!==e.pose&&null!==e.pose&&(null!==e.pose.orientation||null!==e.pose.position?(void 0===this.controllers[n]&&l.onGamepadConnect(e),this.controllers[n].update()):void 0!==this.controllers[n]&&l.onGamepadDisconnect(e))},l.inspect=function(){l.controllers.forEach((function(t){console.log("\n"+t.inspect())}))},l.supported={"Daydream Controller":{style:"daydream",axes:[{name:"thumbpad",indexes:[0,1]}],buttons:["thumbpad"],primary:"thumbpad"},"OpenVR Gamepad":{style:"vive",axes:[{name:"thumbpad",indexes:[0,1]}],buttons:["thumbpad","trigger","grip","menu"],primary:"trigger"},"Oculus Touch (Right)":{style:"oculus",axes:[{name:"thumbstick",indexes:[0,1]}],buttons:["thumbstick","trigger","grip","A","B","thumbrest"],primary:"trigger"},"Oculus Touch (Left)":{style:"oculus",axes:[{name:"thumbstick",indexes:[0,1]}],buttons:["thumbstick","trigger","grip","X","Y","thumbrest"],primary:"trigger"},"Spatial Controller (Spatial Interaction Source)":{style:"microsoft",axes:[{name:"thumbstick",indexes:[0,1]},{name:"thumbpad",indexes:[2,3]}],buttons:["thumbstick","trigger","grip","menu","thumbpad"],primary:"trigger"}},Object.assign(c,{HEAD_ELBOW_OFFSET:new i(.155,-.465,-.15),ELBOW_WRIST_OFFSET:new i(0,0,-.25),WRIST_CONTROLLER_OFFSET:new i(0,0,.05),ARM_EXTENSION_OFFSET:new i(-.08,.14,.08),ELBOW_BEND_RATIO:.4,EXTENSION_RATIO_WEIGHT:.4,MIN_ANGULAR_SPEED:.61}),c.prototype.setControllerOrientation=function(t){this.lastControllerQ.copy(this.controllerQ),this.controllerQ.copy(t)},c.prototype.setHeadOrientation=function(t){this.headQ.copy(t)},c.prototype.setHeadPosition=function(t){this.headPos.copy(t)},c.prototype.setLeftHanded=function(t){this.isLeftHanded=t},c.prototype.update=function(){this.time=performance.now();var t=this.getHeadYawOrientation_(),e=(this.time-this.lastTime)/1e3,n=this.quatAngle_(this.lastControllerQ,this.controllerQ);n/e>c.MIN_ANGULAR_SPEED?this.rootQ.slerp(t,n/10):this.rootQ.copy(t);var o=(new s).setFromQuaternion(this.controllerQ,"YXZ"),r=u.radToDeg(o.x),l=this.clamp_((r-11)/39,0,1),d=this.rootQ.clone().inverse();d.multiply(this.controllerQ);var p=this.elbowPos;p.copy(this.headPos).add(c.HEAD_ELBOW_OFFSET);var h=(new i).copy(c.ARM_EXTENSION_OFFSET);h.multiplyScalar(l),p.add(h);var f=this.quatAngle_(d,new a),y=u.radToDeg(f),m=(1-Math.pow(y/180,4))*(c.ELBOW_BEND_RATIO+(1-c.ELBOW_BEND_RATIO)*l*c.EXTENSION_RATIO_WEIGHT),b=(new a).slerp(d,m),v=b.inverse(),g=d.clone().multiply(v),_=this.wristPos;_.copy(c.WRIST_CONTROLLER_OFFSET),_.applyQuaternion(b),_.add(c.ELBOW_WRIST_OFFSET),_.applyQuaternion(g),_.add(this.elbowPos);var w=(new i).copy(c.ARM_EXTENSION_OFFSET);w.multiplyScalar(l);var O=(new i).copy(this.wristPos);O.add(w),O.applyQuaternion(this.rootQ);var E=(new a).copy(this.controllerQ);this.pose.orientation.copy(E),this.pose.position.copy(O),this.lastTime=this.time},c.prototype.getPose=function(){return this.pose},c.prototype.getForearmLength=function(){return c.ELBOW_WRIST_OFFSET.length()},c.prototype.getElbowPosition=function(){return this.elbowPos.clone().applyQuaternion(this.rootQ)},c.prototype.getWristPosition=function(){return this.wristPos.clone().applyQuaternion(this.rootQ)},c.prototype.getHeadYawOrientation_=function(){var t=(new s).setFromQuaternion(this.headQ,"YXZ");return t.x=0,t.z=0,(new a).setFromEuler(t)},c.prototype.clamp_=function(t,e,n){return Math.min(Math.max(t,e),n)},c.prototype.quatAngle_=function(t,e){var n=new i(0,0,-1),o=new i(0,0,-1);return n.applyQuaternion(t),o.applyQuaternion(e),n.angleTo(o)},t.exports=l},jwwS:function(t,e,n){"use strict";var o;e.__esModule=!0,e.LoadableContext=void 0;var r=((o=n("q1tI"))&&o.__esModule?o:{default:o}).default.createContext(null);e.LoadableContext=r},oI91:function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},wx14:function(t,e,n){"use strict";function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return o}))}}]);